# -- The name of the application
name: generic-application

# -- Environment of app: prd | dev | infra
environment: infra

# -- Annotations to be added to the metadata
annotations: {}

# -- Image configuration for the container
image: 
  repository: hello-world   # -- Repository where the image is stored
  pullPolicy: IfNotPresent  # -- Image pull policy: Always | IfNotPresent | Never
  tag: latest               # -- Tag/version of the image to use
  # -- If image is private, list the secret names here
  # -- Example usage:
  # pullSecrets:
  #   - ghcr-secret         # -- Name of secret with data; MUST be of type kubernetes.io/dockerconfigjson
  pullSecrets: []

# -- Init Containers configuration
initContainers:
  enabled: false   # -- Enable or disable Init Containers
  # -- Example usage:
  # containers:
  #   - name: init-config
  #     image: busybox
  #     command: ["sh", "-c"]
  #     args: ["echo hello"]
  containers: []

# -- Health checks configuration (Liveness, Readiness, and Metrics)
health:
  liveness:
    enabled: false             # -- Enables liveness probe to check if the app is running
    port: server               # -- Port used for the probe (named port or number)
    path: /health/liveness     # -- Endpoint path for the liveness check
    periodSeconds: 10          # -- Frequency of the check in seconds
    initialDelaySeconds: 30    # -- Delay before the first check starts
    successThreshold: 1        # -- Minimum consecutive successes to be considered healthy
    failureThreshold: 3        # -- Minimum consecutive failures to be deemed unhealthy
    timeoutSeconds: 30         # -- Maximum time for a check response

  readiness:
    enabled: false             # -- Enables readiness probe to check if app is ready for traffic
    port: server               # -- Port used for the probe
    path: /health/readiness    # -- Endpoint path for the readiness check
    periodSeconds: 5           # -- Frequency of the check in seconds
    initialDelaySeconds: 40    # -- Delay before the first check starts
    successThreshold: 1        # -- Minimum consecutive successes to be considered ready
    failureThreshold: 5        # -- Minimum consecutive failures to mark as not ready

  metrics:
    port: server               # -- Port for serving application metrics
    path: /metrics             # -- Endpoint path for metrics scraping
    scrapeInterval: 30s        # -- Scraping interval for metrics (e.g., Prometheus)

# -- Resource requests and limits for the container
resources:
  min:
    cpu: 100m                  # -- Minimum CPU requested (e.g., 100m = 0.1 core)
    memory: 128Mi              # -- Minimum memory requested
  max:
    cpu: 200m                  # -- Maximum allowable CPU usage
    memory: 256Mi              # -- Maximum allowable memory usage
  
  # -- Horizontal Pod Autoscaling (HPA) settings
  autoscaling:
    enable: false                         # -- Enable or disable HPA
    minReplicas: 1                        # -- Minimum number of replicas
    maxReplicas: 2                        # -- Maximum number of replicas
    targetCPUUtilizationPercentage: 80    # -- Target CPU usage to trigger scaling
    targetMemoryUtilizationPercentage: 80 # -- Target memory usage to trigger scaling

# -- Service configuration
service:
  enabled: false   # -- Define if the Service should be created
  type: ClusterIP # -- Service type: ClusterIP | NodePort | LoadBalancer
  
  # -- Example usage:
  # ports:
  #   - name: server      # -- Name of the port exposed by the Service
  #     port: 25565       # -- Exposed port number on the Service
  #     targetPort: 25565 # -- Exposed port number on the Application container
  #     protocol: TCP     # -- Protocol used by the Service port | TCP | UDP
  ports: []

# -- Ingress resource configuration
ingress:
  enabled: false               # -- Enable or disable Ingress resource
  host: app.example.com        # -- Hostname for routing (e.g., api.domain.com)
  path: /                      # -- Base path for routing
  ingressClassName: traefik    # -- Ingress controller class (traefik, nginx, etc.)
  tls: false                   # -- Enable or disable TLS (SSL)
  tlsSecretName: ""            # -- Secret name containing the TLS certificate
  # -- Example usage:
  # annotations: 
  #   kubernetes.io/ingress.class: nginx
  annotations: {}

# -- Environment variables to be injected into the container
# -- Example usage:
# env:
#   DATABASE_URL: "postgres://user:pass@host:5432/db"
env: {}

# -- Secrets configuration for environment variables or file mounts
# -- Example usage:
# secrets:
#   - name: DB_PASSWORD        # -- Environment variable name
#     secret: my-secret-name   # -- K8s Secret name
#     key: password            # -- Key inside the Secret
#     mountPath: /app/pass.txt # -- Optional: mount secret as a file
secrets: {}

# -- Additional flags/labels for specific logic
flags: {}

# -- Command line arguments for the application
# -- Example usage:
# args:
#  - --port=3000
args: {}

# -- Persistence and volume configuration
persistence:
  enabled: false               # -- Enable or disable persistent storage
  # -- Example usage:
  # volumes:
  #   - name: "data"           # -- Volume name
  #     size: "10Gi"           # -- Required storage size
  #     mountPath: "/data"     # -- Path inside the container
  #     storageClass: "local"  # -- StorageClass name
  #     accessModes: ["ReadWriteOnce"]
  volumes: []